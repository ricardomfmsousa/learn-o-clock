import { FC, useEffect, useRef } from 'react'
import TimeUtils from '../../helpers/TimeUtils'

interface Props {
  className: string
  time: Date
  setTime: (time: Date) => void
}

const TraditionalClock: FC<Props> = ({ time, setTime, className }) => {
  const hoursPointerRef = useRef<SVGPathElement>(null)
  const minutesPointerRef = useRef<SVGPathElement>(null)
  const secondsPointerRef = useRef<SVGPathElement>(null)
  // Position clock hands based on the `time` value
  useEffect(() => {
    const hoursPointerEl = hoursPointerRef.current
    const minutesPointerEl = minutesPointerRef.current
    const secondsPointerEl = secondsPointerRef.current
    if (hoursPointerEl && minutesPointerEl && secondsPointerEl) {
      const hoursAngle = TimeUtils.getClockHoursPointerAngleDeg(
        time.getHours(),
        time.getMinutes()
      )
      hoursPointerEl.style.transformOrigin = 'center'
      hoursPointerEl.style.transform = `rotate(${hoursAngle}deg)`
      const minutesAngle = TimeUtils.getClockMinutesPointerAngleDeg(
        time.getMinutes()
      )
      minutesPointerEl.style.transformOrigin = 'center'
      minutesPointerEl.style.transform = `rotate(${minutesAngle}deg)`
      const secondsAngle = TimeUtils.getClockSecondsPointerAngleDeg(
        time.getSeconds()
      )
      secondsPointerEl.style.transformOrigin = 'center'
      secondsPointerEl.style.transform = `rotate(${secondsAngle}deg)`
    }
  }, [time])

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 400 400"
      className={className}
    >
      <defs>
        <radialGradient
          id="c"
          gradientUnits="userSpaceOnUse"
          cy={332.36}
          cx={-485.71}
          r={262.86}
          gradientTransform="rotate(-79.461 -71.91 -104.731) scale(.6549)"
        >
          <stop
            offset={0}
            style={{
              stopColor: '#f0f7f9',
            }}
          />
          <stop
            offset={1}
            style={{
              stopColor: '#ccc',
            }}
          />
        </radialGradient>
        <radialGradient
          id="e"
          gradientUnits="userSpaceOnUse"
          cy={353}
          cx={-257.14}
          gradientTransform="matrix(1.6357 -.01413 .00864 .99996 160.42 -3.62)"
          r={52.319}
        >
          <stop
            offset={0}
            style={{
              stopColor: '#fff',
            }}
          />
          <stop
            offset={1}
            style={{
              stopColor: '#fff',
              stopOpacity: 0,
            }}
          />
        </radialGradient>
        <radialGradient
          id="f"
          gradientUnits="userSpaceOnUse"
          cy={219.21}
          cx={-260.01}
          gradientTransform="matrix(-.99219 .12477 -.07518 -.59784 -502.2 415.88)"
          r={37.016}
        >
          <stop
            offset={0}
            style={{
              stopColor: '#fff',
            }}
          />
          <stop
            offset={1}
            style={{
              stopColor: '#fff',
              stopOpacity: 0,
            }}
          />
        </radialGradient>
        <filter id="a">
          <feGaussianBlur stdDeviation={5.257} />
        </filter>
        <filter id="b">
          <feGaussianBlur stdDeviation={5.299} />
        </filter>
        <filter id="d">
          <feGaussianBlur stdDeviation={1.046} />
        </filter>
      </defs>
      <path
        d="M-222.86 332.36a262.86 262.86 0 1 1-525.71 0 262.86 262.86 0 1 1 525.71 0z"
        transform="translate(553.875 -45.138) scale(.72854)"
        style={{
          fillRule: 'evenodd',
          fill: '#333',
        }}
      />
      <path
        d="M-222.86 332.36a262.86 262.86 0 1 1-525.71 0 262.86 262.86 0 1 1 525.71 0z"
        transform="translate(528.663 -28.616) scale(.67662)"
        style={{
          fillRule: 'evenodd',
          filter: 'url(#a)',
          fill: '#000',
        }}
      />
      <path
        d="M-222.86 332.36a262.86 262.86 0 1 1-525.71 0 262.86 262.86 0 1 1 525.71 0z"
        transform="translate(518.11 -21.392) scale(.6549)"
        style={{
          filter: 'url(#b)',
          stroke: 'url(#linearGradient2640)',
          strokeLinecap: 'round',
          strokeWidth: 4.1411,
          fill: 'none',
        }}
      />
      <path
        d="M231.502 27.031a172.147 172.147 0 1 1-62.974 338.48 172.147 172.147 0 1 1 62.974-338.48Z"
        style={{
          fill: 'url(#c)',
          fillRule: 'evenodd',
          strokeWidth: 0.65490001,
        }}
      />
      <path
        ref={hoursPointerRef}
        d="m200.377 86.438-6.303 103.974 2.432.007-2.663 18.07 12.036.033-2.57-18.085 2.801.008z"
        style={{
          fill: '#a00',
          fillRule: 'evenodd',
          strokeWidth: 0.60425001,
        }}
      />
      <path
        ref={minutesPointerRef}
        d="m200.271 45.068-5.611 139.24h2.247l-2.425 24.205 11.103.002-2.406-24.204 2.588.002z"
        style={{
          fill: '#000',
          fillRule: 'evenodd',
          strokeWidth: 0.60425001,
        }}
      />
      <path
        ref={secondsPointerRef}
        d="m200.114 37.71-2.166 145.474.835.009-.915 25.283 4.137.045-.883-25.303.963.012z"
        style={{
          fill: '#500',
          fillRule: 'evenodd',
          strokeWidth: 0.41904914,
        }}
      />
      <path
        d="m424.13 439.78.91 16.14h5.49l.92-16.14h-7.32zm-7.4.5-3.04.33 1.96 11.97 1.67-.17-.59-12.13zm22.11 0-.59 12.13 1.67.17 1.96-11.97-3.04-.33zm-34.56 1.82-3 .63 3.2 11.71 1.65-.36-1.85-11.98zm47.01 0-1.84 11.99 1.64.35 3.19-11.7-2.99-.64zm-59.22 3.1-2.9.94 4.39 11.31 1.61-.53-3.1-11.72zm71.42 0-3.09 11.74 1.61.51 4.39-11.31-2.91-.94zm-83.23 4.36-2.79 1.25 5.55 10.78 1.55-.69-4.31-11.34zm95.04 0-4.29 11.35 1.54.69 5.55-10.79-2.8-1.25zm-104.47 4.51-6.35 3.66 8.86 13.52 4.76-2.74-7.27-14.44zm113.92 0-7.29 14.44 4.76 2.74 8.86-13.52-6.33-3.66zm-126.42 7.79-2.47 1.78 7.67 9.4 1.36-.99-6.56-10.19zm138.9 0-6.56 10.21 1.37.98 7.68-9.39-2.49-1.8zm-148.78 7.79-2.27 2.04 8.6 8.54 1.26-1.12-7.59-9.46zm158.67.01-7.59 9.45 1.24 1.13 8.63-8.53-2.28-2.05zm-167.68 8.78-2.06 2.28 9.47 7.59 1.13-1.26-8.54-8.61zm176.69 0-8.54 8.62 1.13 1.25 9.45-7.59-2.04-2.28zm-184.74 9.68-1.8 2.47 10.2 6.57 1-1.38-9.4-7.66zm192.79.02-9.39 7.66.98 1.37 10.21-6.56-1.8-2.47zm-198.72 8.6-3.66 6.35 14.44 7.28 2.75-4.76-13.53-8.87zm204.64 0-13.53 8.87 2.75 4.76 14.44-7.28-3.66-6.35zm-211.56 12.98-1.24 2.81 11.33 4.3.69-1.54-10.78-5.57zm218.48.02-10.78 5.56.68 1.53 11.34-4.29-1.24-2.8zm-223.14 11.68-.94 2.92 11.72 3.08.53-1.6-11.31-4.4zm227.8.01-11.3 4.41.52 1.6 11.72-3.09-.94-2.92zm-231.22 12.11-.63 2.99 11.98 1.85.36-1.65-11.71-3.19zm234.64.02-11.71 3.19.35 1.64 11.99-1.84-.63-2.99zm-236.77 12.39-.31 3.04 12.11.58.18-1.67-11.98-1.95zm238.9.02-11.98 1.94.18 1.68 12.11-.59-.31-3.03zm-239.71 10.42v7.32l16.14-.91v-5.49l-16.14-.92zm240.52 0-16.14.92v5.49l16.14.91v-7.32zM320.13 570.5l-12.11.59.31 3.04 11.98-1.94-.18-1.69zm215.3.02-.18 1.68 11.98 1.95.31-3.05-12.11-.58zM321.81 581.7l-11.98 1.84.63 3 11.71-3.18-.36-1.66zm211.93.01-.35 1.66 11.71 3.19.63-3-11.99-1.85zm-209.08 10.95-11.72 3.09.94 2.9 11.29-4.39-.51-1.6zm206.24.02-.53 1.6 11.31 4.39.94-2.9-11.72-3.09zm-202.27 10.58-11.33 4.3 1.24 2.79 10.78-5.55-.69-1.54zm198.29.01-.68 1.55 10.78 5.54 1.24-2.78-11.34-4.31zm-190.68 6.46-14.44 7.28 3.66 6.34 13.53-8.87-2.75-4.75zm183.08 0-2.75 4.75 13.53 8.87 3.66-6.34-14.44-7.28zm-179.53 13.2-10.21 6.56 1.8 2.48 9.39-7.68-.98-1.36zm175.98.02-1 1.35 9.39 7.68 1.81-2.47-10.2-6.56zm-168.94 8.83-9.45 7.59 2.05 2.28 8.53-8.61-1.13-1.26zm161.88.02-1.13 1.25 8.54 8.61 2.05-2.27-9.46-7.59zm-153.93 8.04-8.62 8.55 2.28 2.05 7.59-9.47-1.25-1.13zm145.99.02-1.25 1.13 7.59 9.46 2.27-2.06-8.61-8.53zm-137.25 7.19-7.68 9.39 2.49 1.79 6.56-10.19-1.37-.99zm128.5 0-1.35 1 6.56 10.2 2.47-1.81-7.68-9.39zm-118.68 1.8-8.86 13.51 6.35 3.66 7.27-14.42-4.76-2.75zm108.88 0-4.76 2.75 7.29 14.42 6.33-3.66-8.86-13.51zm-99.21 9.65-5.55 10.78 2.8 1.25 4.29-11.34-1.54-.69zm89.53 0-1.55.69 4.31 11.35 2.78-1.24-5.54-10.8zm-79 4.15-4.39 11.29 2.92.95 3.09-11.73-1.62-.51zm68.46 0-1.62.51 3.11 11.74 2.9-.94-4.39-11.31zm-36.96 1.51-.91 16.15h7.32l-.92-16.15h-5.49zm-20.57 1.51-3.19 11.69 2.99.64 1.84-11.99-1.64-.34zm46.61 0-1.65.34 1.85 11.99 3-.64-3.2-11.69zm-35.45 1.85-1.96 11.97 3.05.32.59-12.11-1.68-.18zm24.28 0-1.67.18.58 12.11 3.05-.32-1.96-11.97z"
        transform="translate(-364.95 -543.385) scale(1.3207)"
        style={{
          fillRule: 'evenodd',
          fill: '#000',
        }}
      />
      <path
        d="M336.17 567.46c-2.55 0-4.39-.3-5.51-.92-1.13-.61-1.63-1.58-1.51-2.91v-.3h3.61v.3c0 .74.29 1.3.87 1.68.57.38 1.42.57 2.54.57 1.87 0 3.05-.33 3.53-.98.42-.59.65-1.91.69-3.96-1.6.69-3.3 1.03-5.1 1.03-2.26 0-3.87-.33-4.83-.99-.97-.66-1.45-1.77-1.45-3.31v-.55c0-1.5.61-2.62 1.83-3.37 1.21-.74 3.04-1.11 5.49-1.11 2.99 0 5.01.41 6.05 1.23s1.56 2.41 1.54 4.76v1.74c-.01 2.79-.55 4.66-1.61 5.64-1.05.97-3.1 1.45-6.14 1.45zm4.11-10.39c0-1.08-.27-1.82-.8-2.21-.53-.4-1.54-.59-3.01-.59-1.37 0-2.35.21-2.93.64-.59.43-.88 1.15-.88 2.16v.56c0 .96.3 1.65.9 2.07.59.42 1.56.64 2.91.64 1.25 0 2.19-.24 2.84-.7.64-.46.97-1.13.97-2.01v-.56z"
        transform="translate(-364.95 -543.385) scale(1.3207)"
        style={{
          fill: '#000',
        }}
      />
      <path
        transform="matrix(1.8416 0 0 .9471 -364.95 -543.385)"
        d="M374.7 775.58c0-1.01-.2-1.72-.59-2.14-.39-.43-1.05-.64-1.97-.64-.84 0-1.48.26-1.91.78-.44.52-.64 1.26-.61 2.21v.6H367v-.6c-.1-1.66.29-2.94 1.18-3.84s2.22-1.35 3.97-1.35c1.69 0 2.97.38 3.85 1.15.87.77 1.31 1.89 1.31 3.37v.58c0 1.72-.38 2.93-1.16 3.64-.43.41-1.06.69-1.88.85.88.17 1.54.45 1.96.85.72.67 1.08 1.99 1.08 3.94v1.12c0 1.72-.46 3.02-1.38 3.88s-2.3 1.29-4.15 1.29c-1.69 0-2.97-.46-3.85-1.4-.89-.93-1.3-2.26-1.24-3.99v-.6h2.59v.6c-.02 1.08.17 1.88.58 2.4.4.52 1.03.78 1.88.78 1.02 0 1.77-.28 2.26-.82.48-.55.72-1.39.72-2.53v-1.11c0-1.01-.24-1.8-.72-2.37-.49-.57-1.17-.85-2.04-.85h-.77v-2.32h.27c1.13 0 1.95-.23 2.46-.69.52-.46.78-1.2.78-2.21v-.58z"
        style={{
          fill: '#000',
        }}
      />
      <path
        style={{
          fill: '#000',
        }}
        d="M432.6 459.87c-2.53 0-4.37.3-5.55.9-1.18.6-1.7 1.5-1.56 2.71v.44h3.64v-.44c-.03-.77.21-1.3.71-1.6.51-.3 1.42-.47 2.76-.47 1.04 0 1.88.18 2.52.53.64.36.96.84.96 1.43 0 1.05-.79 2.25-2.39 3.63-1.59 1.37-4.43 3.27-8.49 5.71v1.76h14.78v-1.57H428.8c4.03-2.47 6.81-4.35 8.36-5.65 1.71-1.45 2.56-2.76 2.56-3.91 0-1.14-.6-2-1.81-2.58-1.21-.6-2.98-.89-5.31-.89zm-12.05.15c-.85.44-1.64.77-2.34 1.04-.69.26-1.57.55-2.63.84v1.73c1.42-.38 2.6-.75 3.51-1.09l.72-.28v12.21h3.65v-14.45z"
        transform="translate(-364.95 -543.385) scale(1.3207)"
      />
      <path
        style={{
          fill: '#000',
          strokeWidth: 1.32070005,
        }}
        d="M200.375 304.254c-4.213 0-6.96.7-8.24 2.1-1.308 1.413-1.954 4.41-1.98 8.994v2.285c0 2.153.791 3.724 2.363 4.715 1.571.99 4.053 1.492 7.46 1.492 3.276 0 5.746-.49 7.383-1.48 1.638-.978 2.471-2.457 2.471-4.438v-.725c0-2.047-.607-3.501-1.822-4.373-1.215-.871-3.236-1.306-6.063-1.306-2.51 0-4.82.408-6.947 1.24.053-2.457.384-4.106.979-4.951.686-.978 2.15-1.467 4.396-1.467 1.48 0 2.59.25 3.355.765.766.502 1.149 1.242 1.149 2.22v.396h4.767v-.397c.159-1.756-.514-3.05-1.994-3.855-1.479-.806-3.91-1.215-7.277-1.215zm-.396 9.416c1.77 0 3.05.278 3.843.846.793.554 1.19 1.466 1.19 2.734v.725c0 1.334-.396 2.285-1.162 2.853-.766.568-2.062.86-3.871.86-1.929 0-3.248-.265-3.948-.78-.7-.515-1.056-1.494-1.056-2.933v-.725c0-1.175.422-2.06 1.28-2.668.846-.607 2.086-.912 3.724-.912z"
      />
      <path
        style={{
          fill: '#000',
        }}
        d="M376.46 472.72c-.85.44-1.64.79-2.35 1.06-.69.26-1.56.53-2.63.82v1.73c1.43-.37 2.6-.73 3.52-1.07l.72-.28v12.21h3.64v-14.47zm12.24 0c-.85.44-1.62.79-2.33 1.06-.69.26-1.57.53-2.63.82v1.73c1.42-.37 2.58-.73 3.5-1.07l.72-.28v12.21h3.66v-14.47z"
        transform="translate(-364.95 -543.385) scale(1.3207)"
      />
      <path
        style={{
          fill: '#000',
          strokeWidth: 1.32070005,
        }}
        d="M104.85 125.008c-3.342 0-5.786.424-7.397 1.256-1.611.832-2.416 2.125-2.416 3.855v9.008c0 1.743.845 3.103 2.549 4.041 1.704.95 4.12 1.426 7.264 1.426 3.209 0 5.678-.476 7.355-1.4 1.664-.938 2.496-2.284 2.496-4.067v-9.008c0-1.81-.765-3.116-2.31-3.922-1.546-.792-4.068-1.19-7.541-1.19zm0 2.1c1.77 0 3.063.238 3.855.7.793.476 1.19 1.241 1.19 2.311v9.008c0 1.083-.423 1.914-1.282 2.482-.845.555-2.113.819-3.763.819-1.704 0-2.959-.263-3.778-.805-.819-.541-1.228-1.373-1.228-2.496v-9.008c0-1.122.383-1.916 1.123-2.351.74-.45 2.02-.66 3.883-.66z"
      />
      <path
        style={{
          fill: '#000',
        }}
        d="M343.85 506.24c-.85.44-1.62.79-2.33 1.06-.69.26-1.57.53-2.63.82v1.73c1.42-.38 2.6-.73 3.51-1.08l.71-.29v12.23h3.66v-14.47z"
        transform="translate(-364.95 -543.385) scale(1.3207)"
      />
      <path
        style={{
          fill: '#000',
          strokeWidth: 1.32067382,
        }}
        d="M96.848 246.863c-2.965-.043-5.254.378-6.87 1.264-1.573.853-2.375 2.071-2.455 3.648.039 1.507.749 2.628 2.149 3.356.84.429 1.96.75 3.357.969-1.733.154-3.046.476-3.974.955-1.43.754-2.176 2.058-2.256 3.902.029 1.785.81 3.128 2.324 4.027 1.589.923 4.05 1.413 7.365 1.461 3.057.045 5.476-.413 7.221-1.363 1.69-.93 2.565-2.22 2.643-3.873-.025-1.955-.677-3.298-1.938-4.025-.767-.428-1.96-.748-3.576-.952 1.31-.17 2.364-.458 3.162-.882 1.3-.7 1.988-1.804 2.063-3.315-.029-1.71-.755-2.987-2.163-3.81-1.479-.865-3.83-1.315-7.052-1.362zm9.215 5.172c0 .065.008.126.007.192l.006-.38c0 .065-.01.125-.013.188zm.289 9.174c0 .083.009.16.007.246l.006-.406c0 .055-.01.106-.013.16zm-19.553-.252c-.001-.065-.009-.127-.008-.193l-.006.406c.001-.074.01-.14.014-.213zm.724-9.182c-.001-.067-.01-.13-.01-.199l-.003.38c0-.063.01-.12.013-.18zm9.293-2.83c1.584.023 2.722.297 3.414.809.652.481.976 1.244 1 2.277.004-.065.019-.12.02-.187l-.006.377c.001-.068-.012-.124-.014-.19-.056 1.028-.42 1.807-1.103 2.305-.744.529-1.872.788-3.4.766-1.51-.022-2.63-.313-3.34-.864-.684-.516-1.027-1.304-1.055-2.328-.004.063-.019.117-.02.182l.006-.38c0 .071.012.13.014.198.058-.966.44-1.711 1.139-2.2.763-.528 1.872-.786 3.345-.765zm-.193 8.285c1.934.029 3.236.313 3.91.834.655.494.979 1.403.996 2.7.003-.068.017-.124.018-.194l-.006.409c.001-.078-.01-.14-.012-.215-.055 1.256-.441 2.169-1.166 2.707-.782.576-2.057.842-3.843.816-1.916-.028-3.219-.313-3.91-.853-.638-.511-.96-1.456-.977-2.79-.003.066-.017.122-.018.19l.006-.408c-.001.079.01.142.012.219.054-1.212.423-2.098 1.146-2.618.764-.557 2.04-.823 3.844-.797zm34.759 50.198 12.677-16.836-14.27-.208.03-2.093 18.561.27-.03 2.094-11.26 16.856zm136.988-3.41c-.032 2.15-.754 3.664-2.185 4.524-1.412.86-3.868 1.26-7.311 1.21-3.425-.05-5.814-.407-7.15-1.061-1.334-.664-2.054-1.849-2.195-3.546l.008-.569 4.77.07-.008.568c.098.807.458 1.4 1.116 1.788.657.379 1.649.583 2.974.602 2.044.03 3.411-.225 4.119-.774.726-.538 1.092-1.613 1.115-3.223l.019-1.278c.017-1.193-.302-2.041-.94-2.524-.619-.483-1.757-.736-3.396-.76-1.565-.023-2.728.178-3.49.593-.779.415-1.138 1.054-1.132 1.916l-4.917-.072.514-11.245 17.364.253-.03 2.15-12.983-.19-.273 6.078c.835-.414 1.521-.717 2.077-.917 1.24-.446 2.735-.652 4.503-.626 2.817.041 4.763.486 5.856 1.326 1.092.84 1.623 2.316 1.593 4.428zm33.568-56.362-11.71 12.276-.027 1.968 13.387.196-.068 4.687 4.824.072.068-4.689 4.272.063.03-2.083-4.27-.062.179-12.33-6.685-.098zm1.826 2.395-.147 9.963-9.133-.133 9.28-9.83zm10.051-119.656c-.022 1.516-1.17 3.213-3.463 5.103-2.07 1.693-5.77 4.121-11.14 7.301l14.769.215-.03 2.084-19.501-.285.034-2.32c5.387-3.151 9.162-5.616 11.287-7.394 2.144-1.787 3.217-3.372 3.237-4.745.012-.777-.403-1.408-1.243-1.894-.84-.476-1.941-.73-3.304-.749-1.768-.026-3.005.155-3.673.553-.67.388-.992 1.093-.952 2.117l-.008.568-4.806-.07.008-.568c-.18-1.604.52-2.787 2.096-3.56 1.577-.772 4.032-1.134 7.365-1.086 3.075.045 5.408.477 6.98 1.277 1.59.8 2.366 1.957 2.344 3.453zM262.56 99.953l.235-16.127-.963.346c-1.203.437-2.757.888-4.643 1.353l.034-2.283c1.405-.358 2.57-.7 3.477-1.038a29.058 29.058 0 0 0 3.114-1.347l3.83.056-.278 19.11z"
      />
      <path
        d="M-204.82 291.65a52.319 52.319 0 1 1-104.64 0 52.319 52.319 0 1 1 104.64 0z"
        transform="matrix(.14492 -.02618 .02618 .14492 229.695 147.406)"
        style={{
          opacity: 0.8,
          fillRule: 'evenodd',
          filter: 'url(#d)',
          fill: '#000',
        }}
      />
      <path
        d="M-204.82 291.65a52.319 52.319 0 1 1-104.64 0 52.319 52.319 0 1 1 104.64 0z"
        style={{
          fillRule: 'evenodd',
          fill: '#000',
        }}
        transform="rotate(-10.24 935.845 -1207.73) scale(.14727)"
      />
      <path
        d="M-204.82 291.65a52.32 52.32 0 1 1-104.64 0 52.32 52.32 0 1 1 104.64 0z"
        style={{
          fill: 'url(#e)',
          fillRule: 'evenodd',
        }}
        transform="rotate(-10.246 971.422 -1182.36) scale(.12765)"
      />
      <path
        d="M-257.16 243.62c-17.15 0-32.07 9.03-40.56 22.54 11.17-10.63 26.22-17.19 42.81-17.19 11.38 0 22.04 3.11 31.22 8.47-8.65-8.47-20.39-13.82-33.47-13.82z"
        transform="matrix(.14492 -.02618 .02618 .14492 229.64 147.327)"
        style={{
          opacity: 0.8,
          fill: 'url(#f)',
          fillRule: 'evenodd',
        }}
      />
    </svg>
  )
}

export default TraditionalClock
